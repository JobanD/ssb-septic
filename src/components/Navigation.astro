---
import { Image } from "astro:assets";
import logo from "../assets/official-logo-transparent.png"
---
<header id="nav" class="bg-white">
    <div class="container">
        <!--Nav Logo-->
        <a href="/" class="logo flex items-center no-underline text-current" aria-label="back to home">
          <!-- <p class="font-bold text-3xl md:text-6xl lg:text-7xl text-primary">SSB</p> -->
            <div class="h-12 md:h-32 lg:h-24" >
                <Image src={logo} alt="Septic Pump SSB Logo" densities={[1.5, 2]} class="w-full h-full m-0 p-0" />
            </div>
        </a>
        <div class="flex items-center space-x-1 text-xs sm:text-sm md:text-lg lg:text-2xl mt-0 mr-auto mb-0 ml-0">
          <a href="tel:+12068338777" class="bg-primary hover:bg-black text-white font-bold py-1 sm:py-2 px-2 sm:px-4 rounded-full shadow-lg hover:shadow-xl transition duration-300 ease-in-out">
              <span class="hidden sm:inline">Call Us:</span> +1 (206) 833-8777
          </a>
        </div>
      
      
        <!--Navigation List-->
        <nav class="nav" role="navigation">
            <!--Mobile Nav Toggle-->
            <button class="toggle" aria-label="mobile menu toggle">
                <div class="box" aria-hidden="true">
                    <span class="line line1" aria-hidden="true"></span>
                    <span class="line line2" aria-hidden="true"></span>
                    <span class="line line3" aria-hidden="true"></span>
                </div>
            </button>
            <!-- We need a wrapper div so we can set a fixed height on the ul in case the nav list gets too long from too many dropdowns being opened and needs to have an overflow scroll. This wrapper acts as the background so it can go the full height of the screen and not cut off any overflowing nav items while the ul stops short of the bottom of the screen, which keeps all nav items in view no matter how mnay there are-->
            <div class="ul-wrapper">
                <ul id="expanded" class="ul font-bold" aria-expanded="false">
                    <li class="li">
                      <a href="/" class="li-link active">
                          Home
                      </a>
                    </li>
                    <li class="li">
                        <a href="/about" class="li-link">
                            About
                        </a>
                    </li>
                    <li class="li">
                        <a href="/services" class="li-link">
                            Services
                        </a>
                    </li>
                    <li class="li">
                        <a href="/faq" class="li-link">
                            FAQ
                        </a>
                    </li>
                    <li class="li">
                        <a href="/contact" class="li-link special-link">
                            Contact Us
                        </a>
                    </li>
                </ul>
            </div>
        </nav>
    </div>
</header>

<style>
    /* Mobile - 768px */
@media only screen and (max-width: 57.9375rem) {
  body.open {
    overflow: hidden;
  }
  #nav {
    width: 100%;
    /* prevents padding and border from affecting height and width */
    box-sizing: border-box;
    padding: 0.5rem 1rem;
    box-shadow: rgba(149, 157, 165, 0.2) 0px 8px 24px;
    position: sticky;
    top: 0;
    z-index: 10000;
  }
  #nav:before {
    content: "";
    width: 100%;
    height: 0vh;
    background: rgba(0, 0, 0, 0.6);
    opacity: 0;
    display: block;
    position: absolute;
    top: 100%;
    right: 0;
    z-index: -1100;
    transition: height 0.5s, opacity 0.5s;
    -webkit-backdrop-filter: blur(10px);
    backdrop-filter: blur(10px);
  }
  #nav.active:before {
    height: 150vh;
    opacity: 1;
  }
  #nav.active .ul-wrapper {
    opacity: 1;
    transform: scaleY(1);
    transition-delay: 0.15s;
    background-color: rgb(149, 207, 255);
  }
  #nav.active .li {
    opacity: 1;
    transform: translateY(0);
  }
  #nav .container {
    width: 100%;
    display: flex;
    justify-content: flex-end;
    align-items: center;
  }
  #nav .logo {
    width: 40%;
    max-width: 9.125rem;
    height: 100%;
    margin: 0 auto 0 0;
    /* prevents padding and border from affecting height and width */
    box-sizing: border-box;
    padding: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 10;
  }
  #nav .logo img {
    width: 100%;
    height: 100%;
    /* ensures the image never overflows the container. It stays contained within it's width and height and expands to fill it then stops once it reaches an edge */
    object-fit: contain;
  }
  #nav .toggle {
    /* 44px - 48px */
    width: clamp(2.75rem, 6vw, 3rem);
    height: clamp(2.75rem, 6vw, 3rem);
    margin: 0 0 0 auto;
    background-color: transparent;
    border: none;
    border-radius: 0.25rem;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  #nav .active .line1 {
    top: 50%;
    transform: translate(-50%, -50%) rotate(225deg);
  }
  #nav .active .line2 {
    top: 50%;
    transform: translate(-50%, -50%) translateY(0) rotate(-225deg);
    transform-origin: center;
  }
  #nav .active .line3 {
    opacity: 0;
    bottom: 100%;
  }
  #nav .box {
    /* 24px - 28px */
    width: clamp(1.5rem, 2vw, 1.75rem);
    /* 14px - 16px */
    height: clamp(0.875rem, 1.5vw, 1rem);
    position: relative;
  }
  #nav .line {
    width: 100%;
    height: 2px;
    background-color: #1a1a1a;
    border-radius: 2px;
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
  }
  #nav .line1 {
    top: 0;
    transition: transform 0.5s, top 0.3s, left 0.3s;
    animation-duration: 0.7s;
    animation-timing-function: ease;
    animation-direction: normal;
    animation-fill-mode: forwards;
    transform-origin: center;
  }
  #nav .line2 {
    top: 50%;
    transform: translateX(-50%) translateY(-50%);
    transition: top 0.3s, left 0.3s, transform 0.5s;
    animation-duration: 0.7s;
    animation-timing-function: ease;
    animation-direction: normal;
    animation-fill-mode: forwards;
  }
  #nav .line3 {
    bottom: 0;
    transition: bottom 0.3s, opacity 0.3s;
  }
  #nav .ul-wrapper {
    width: 100%;
    height: auto;
    padding-bottom: 2.4em;
    background-color: #fff;
    box-shadow: inset rgba(0, 0, 0, 0.2) 0px 8px 24px;
    opacity: 0;
    position: absolute;
    top: 100%;
    left: 0;
    z-index: -1;
    overflow: hidden;
    transform: scaleY(0);
    transition: transform 0.4s, opacity 0.3s;
    transform-origin: top;
  }
  #nav .ul {
    width: 100%;
    height: auto;
    max-height: 65vh;
    margin: 0;
    padding: 3rem 0 0 0;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    align-items: center;
    gap: 1.25rem;
    overflow: scroll;
  }
  #nav .li {
    text-align: center;
    list-style: none;
    width: 100%;
    margin-right: 0;
    opacity: 0;
    /* transition from these values */
    transform: translateY(-4.375rem);
    transition: transform 0.6s, opacity 0.9s;
  }
  #nav .li:nth-of-type(1) {
    transition-delay: 0.05s;
  }
  #nav .li:nth-of-type(2) {
    transition-delay: 0.1s;
  }
  #nav .li:nth-of-type(3) {
    transition-delay: 0.15s;
  }
  #nav .li:nth-of-type(4) {
    transition-delay: 0.2s;
  }
  #nav .li:nth-of-type(5) {
    transition-delay: 0.25s;
  }
  #nav .li:nth-of-type(6) {
    transition-delay: 0.3s;
  }
  #nav .li:nth-of-type(7) {
    transition-delay: 0.35s;
  }
  #nav .li:nth-of-type(8) {
    transition-delay: 0.4s;
  }
  #nav .li:nth-of-type(9) {
    transition-delay: 0.45s;
  }
  #nav .li:nth-of-type(10) {
    transition-delay: 0.5s;
  }
  #nav .li:nth-of-type(11) {
    transition-delay: 0.55s;
  }
  #nav .li:nth-of-type(12) {
    transition-delay: 0.6s;
  }
  #nav .li:nth-of-type(13) {
    transition-delay: 0.65s;
  }
  #nav .li-link {
    /* 16px - 24px */
    font-size: clamp(1rem, 2.5vw, 1.5rem);
    line-height: 1.2em;
    text-decoration: none;
    margin: 0;
    color: black;
    display: inline-block;
    position: relative;
  }
  #nav .li-link:before {
    /* active state underline */
    content: "";
    width: 100%;
    height: 1px;
    background: currentColor;
    opacity: 1;
    display: none;
    position: absolute;
    bottom: -0.125rem;
    left: 0;
  }
  #nav .li-link.active:before {
    display: block;
  }
  #nav .button-solid {
    display: none;
  }
}
/*-- -------------------------- -->
<---     Desktop Navigation     -->
<--- -------------------------- -*/
/* Small Desktop - 768px */
@media only screen and (min-width: 58rem) {
  #nav {
    width: 100%;
    /* prevents padding and border from affecting height and width */
    box-sizing: border-box;
    padding: 0 1rem;
    box-shadow: rgba(149, 157, 165, 0.2) 0px 8px 24px;
    position: sticky;
    top: 0;
    z-index: 10000;
  }
  #nav .container {
    width: 100%;
    max-width: 80rem;
    margin: auto;
    display: flex;
    justify-content: flex-end;
    align-items: center;
    gap: 1.5rem;
  }
  #nav .toggle {
    display: none;
  }
  #nav .logo {
    /* width: 18.4%;
    max-width: 21.875rem; */
    height: 4rem;
    /* margin-right auto pushes everything away from it to the right */
    margin: 0 auto 0 0;
    padding: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 100;
  }
  #nav .ul {
    width: 100%;
    margin: 0;
    padding: 0;
    display: flex;
    justify-content: flex-start;
    align-items: center;
    /* 20px - 36px */
    gap: clamp(1.25rem, 2.6vw, 2.25rem);
  }
  #nav .li {
    list-style: none;
    padding: 2.5rem 0;
    /* prevent flexbox from squishing it */
    flex: none;
  }
  #nav .li-link {
    /* 14px - 16px */
    font-size: clamp(1.15rem, 1.3vw, 1.4rem);
    line-height: 1.5em;
    text-decoration: none;
    margin: 0;
    color: var(--bodyTextColor);
    display: block;
    position: relative;
  }
  #nav .li-link:hover:before {
    width: 100%;
  }
  #nav .li-link.active:before {
    width: 100%;
  }
  #nav .li-link:before {
    /* active state underline */
    content: "";
    width: 0%;
    height: 2px;
    background: var(--primary);
    opacity: 1;
    display: block;
    position: absolute;
    bottom: 0rem;
    left: 0;
    transition: width 0.3s;
  }
  #nav .button-solid {
    font-size: 1rem;
    font-weight: 700;
    /* 46px - 56px */
    line-height: clamp(2.875em, 5.5vw, 3.5em);
    text-align: center;
    text-decoration: none;
    min-width: 9.375rem;
    margin: 0;
    /* prevents padding from adding to the width */
    box-sizing: border-box;
    padding: 0 1.5rem;
    color: #fff;
    background-color: var(--primary);
    border-radius: 0.25rem;
    display: inline-block;
    position: relative;
    z-index: 1;
  }
  #nav .button-solid:before {
    content: "";
    width: 0%;
    height: 100%;
    background: #000;
    opacity: 1;
    border-radius: 0.25rem;
    position: absolute;
    top: 0;
    left: 0;
    z-index: -1;
    transition: width 0.3s;
  }
  #nav .button-solid:hover:before {
    width: 100%;
  }

  .special-link {
    background-color: hsl(217, 90%, 55%);
    color: white !important;
    padding: 0.5rem 1rem;
    border-radius: 5px;
    transition: background-color 0.3s ease;
  }

  .special-link:hover {
    background-color: hsl(218, 100%, 2%);
  }
}
</style>


<script>
  document.addEventListener('DOMContentLoaded', function() {
      const CSbody = document.querySelector('body');
      if (!CSbody) return; // Ensure CSbody is not null

      // Delegating click event to the body for more reliable event handling on dynamic elements
      CSbody.addEventListener('click', function(event) {
          // Ensure event.target is an Element before calling Element-specific methods
          if (!(event.target instanceof Element)) return;

          const toggle = event.target.closest('.toggle');
          const dropdown = event.target.closest('.dropdown');
          const CSnavbarMenu = document.querySelector('#nav');
          if (!CSnavbarMenu) return; // Ensure CSnavbarMenu is not null

          if (toggle) {
              toggle.classList.toggle('active');
              CSnavbarMenu.classList.toggle('active');
              CSbody.classList.toggle('open');
              ariaExpanded();
          }

          if (dropdown) {
              dropdown.classList.toggle('active');
          }
      });

      function ariaExpanded() {
          const csUL = document.querySelector('#expanded');
          if (!csUL) return; // Ensure csUL is not null

          const csExpanded = csUL.getAttribute('aria-expanded');
          csUL.setAttribute('aria-expanded', csExpanded === 'false' ? 'true' : 'false');
      }

      activateCurrentLink();
  });

  function activateCurrentLink() {
      const navLinks = document.querySelectorAll('#nav .li-link');
      const currentPath = window.location.pathname;

      navLinks.forEach(link => {
          if (link.getAttribute('href') === currentPath) {
              link.classList.add('active');
          } else {
              link.classList.remove('active');
          }
      });
  }
</script>


  